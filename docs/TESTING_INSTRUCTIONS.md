# Инструкция по тестированию Instagram Scraper Bot

## Подготовка к тестированию

### Шаг 1: Подготовка тестовой среды

1. Убедитесь, что у вас установлены все необходимые зависимости:
   ```bash
   bun install
   ```

2. Запустите скрипт подготовки тестовой среды:
   ```bash
   ./start-testing.sh
   ```

   Этот скрипт автоматически выполнит:
   - Подготовку тестовой среды
   - Генерацию данных с граничными случаями
   - Запуск автоматических тестов

   Или вы можете запустить отдельные шаги вручную:
   ```bash
   bun run scripts/prepare-test-env.ts
   bun run scripts/generate-edge-cases.ts
   ```

   Опции скрипта `prepare-test-env.ts`:
   - `--reset` - сбросить базу данных перед инициализацией
   - `--verbose` - подробный вывод

   Скрипт выполнит следующие действия:
   - Проверит наличие всех необходимых зависимостей
   - Инициализирует тестовую базу данных SQLite
   - Заполнит базу данных тестовыми данными
   - Создаст файл `.env` с тестовыми переменными окружения (если он не существует)

### Шаг 2: Запуск бота в тестовом режиме

1. Запустите бота в режиме разработки:
   ```bash
   ./start-bot.sh
   ```
   или
   ```bash
   bun run dev
   ```

2. Откройте бота в Telegram и отправьте команду `/start`

## Проведение тестирования

### Вариант 1: Полное тестирование

Для полного тестирования всех функций бота используйте подробный план тестирования:

1. Откройте файл `docs/TESTING_PLAN.md`
2. Последовательно выполните все тест-кейсы
3. Отметьте статус каждого тест-кейса:
   - ✅ Пройден
   - ❌ Не пройден
   - ⚠️ Частично пройден
4. Добавьте комментарии для не пройденных или частично пройденных тест-кейсов
5. Заполните таблицу с итогами тестирования

### Вариант 2: Тестирование MVP

Для быстрого тестирования основных функций бота (MVP) используйте упрощенный чек-лист:

1. Откройте файл `docs/MVP_TESTING_CHECKLIST.md`
2. Последовательно выполните все пункты чек-листа
3. Отметьте статус каждого пункта:
   - ✅ Работает
   - ❌ Не работает
   - ⚠️ Работает частично
4. Добавьте комментарии при необходимости
5. Заполните раздел "Итоги тестирования"

## Тестовые данные

### Пользователи

| Telegram ID | Имя пользователя | Имя | Фамилия |
|-------------|------------------|-----|---------|
| 123456789   | test_user        | Test | User    |

### Проекты

| ID | Название | ID пользователя |
|----|----------|----------------|
| 1  | Тестовый проект 1 | 1 |
| 2  | Тестовый проект 2 | 1 |

### Конкуренты

| ID | ID проекта | Имя пользователя | Instagram URL |
|----|------------|------------------|---------------|
| 1  | 1          | beauty_clinic    | https://www.instagram.com/beauty_clinic |
| 2  | 1          | luxury_beauty    | https://www.instagram.com/luxury_beauty |
| 3  | 2          | skincare_expert  | https://www.instagram.com/skincare_expert |

### Хештеги

| ID | ID проекта | Название |
|----|------------|----------|
| 1  | 1          | красота |
| 2  | 1          | косметология |
| 3  | 2          | уходзакожей |

### Reels

| ID | ID проекта | Тип источника | ID источника | Instagram ID | Просмотры | Лайки | Комментарии |
|----|------------|---------------|-------------|--------------|-----------|-------|-------------|
| 1  | 1          | competitor    | 1           | reel123456   | 100000    | 5000  | 200         |
| 2  | 1          | competitor    | 2           | reel234567   | 75000     | 3000  | 150         |
| 3  | 2          | hashtag       | 3           | reel345678   | 120000    | 6000  | 300         |

## Отчет о тестировании

После завершения тестирования:

1. Создайте новую ветку в репозитории:
   ```bash
   git checkout -b test-results
   ```

2. Добавьте заполненные файлы тестирования:
   ```bash
   git add docs/TESTING_PLAN.md docs/MVP_TESTING_CHECKLIST.md
   ```

3. Создайте коммит:
   ```bash
   git commit -m "docs: add testing results"
   ```

4. Отправьте изменения в репозиторий:
   ```bash
   git push origin test-results
   ```

5. Создайте Pull Request с результатами тестирования

## Устранение проблем

### Проблема: Бот не запускается

1. Проверьте, что все зависимости установлены:
   ```bash
   bun install
   ```

2. Проверьте файл `.env`:
   ```bash
   cat .env
   ```

3. Проверьте логи запуска:
   ```bash
   bun run dev
   ```

### Проблема: Ошибки при работе с базой данных

1. Сбросьте тестовую базу данных:
   ```bash
   bun run scripts/prepare-test-env.ts --reset
   ```

2. Проверьте, что путь к базе данных в `.env` соответствует пути в скрипте подготовки тестовой среды

### Проблема: Ошибки при скрапинге

В тестовом режиме используется мок-сервис для скрапинга, который возвращает тестовые данные. Если возникают ошибки:

1. Проверьте, что в `.env` установлена переменная `TEST_MODE=true`
2. Проверьте, что в `.env` установлена переменная `APIFY_TOKEN=mock_apify_token_for_testing`

## Контакты для поддержки

Если у вас возникли проблемы при тестировании, обратитесь к:

- **Разработчик**: [Имя разработчика] - [контактная информация]
- **Тестировщик**: [Имя тестировщика] - [контактная информация]
- **Менеджер проекта**: [Имя менеджера] - [контактная информация]
